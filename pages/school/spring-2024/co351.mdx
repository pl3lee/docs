import { Definition, DefinitionName, DefinitionContent, Corollary, CorollaryName, CorollaryContent, Example, ExampleName, ExampleContent, Problem, ProblemName, ProblemContent, Proposition, PropositionName, PropositionContent, Theorem, TheoremName, TheoremContent, Lemma, LemmaName, LemmaContent, Proof, ProofName, ProofContent } from "/components/math";
import { Steps, Callout } from 'nextra/components'

# CO 351: Network Flow Theory
## Lecture 1 (May 7 2024)
### Fundamentals
Let's start with basic definitions of graphs.
<Definition withName={true}>
    <DefinitionName>Graph</DefinitionName>
    <DefinitionContent>
        A graph $G$ is a pair $(V, E)$ where $V$ is a finite set and $E$ is a set of unordered pairs of distinct elements of $V$.
    </DefinitionContent>
</Definition>
<Definition withName={true}>
    <DefinitionName>Adjacent, Endpoints, and Incident</DefinitionName>
    <DefinitionContent>
        Consider the edge $ij$. Then 
        - $i$ and $j$ are adjacent vertices
        - $i$ and $j$ are the endpoints of the edge
        - Edge $ij$ is said to be incident to vertices $i$ and $j$
    </DefinitionContent>
</Definition>
<Definition withName={true}>
    <DefinitionName>Degree</DefinitionName>
    <DefinitionContent>
        The degree of a vertex $v$ is the number of edges incident to $v$. We use the notation $d_G(v)$ or $d(v)$ to denote the degree of $v$ in graph $G$.
    </DefinitionContent>
</Definition>
<Definition withName={true}>
    <DefinitionName>Walk</DefinitionName>
    <DefinitionContent>
        A walk $Q$ is a non-empty sequence of edges. For example, $v_1v_2,v_2v_3,\ldots,v_{k-1}v_k$. We can abbreviate this by only writing the vertices: $v_1,v_2,\ldots, v_k$.

        Note that an edge may appear several times in a walk.
    </DefinitionContent>
</Definition>
<Definition withName={true}>
    <DefinitionName>Path</DefinitionName>
    <DefinitionContent>
        A path $P$ is a walk such that $v_1,\ldots,v_k$ are distinct vertices, meaning that we visit a new node at each step.
    </DefinitionContent>
</Definition>
<Definition withName={true}>
    <DefinitionName>Cycle</DefinitionName>
    <DefinitionContent>
        A cycle $C = v_1,\ldots,v_k$ is a walk such that $k \geq 3$ and $v_1 = v_k$ with $v_1,\ldots,v_{k-1}$ being distinct.
    </DefinitionContent>
</Definition>
<Definition withName={true}>
    <DefinitionName>$st$-walk</DefinitionName>
    <DefinitionContent>
        An $st$-walk is a walk that starts at $s$ and ends at $t$.
    </DefinitionContent>
</Definition>
<Definition withName={true}>
    <DefinitionName>$st$-path</DefinitionName>
    <DefinitionContent>
        An $st$-path is a path that starts at $s$ and ends at $t$, with $s \neq t$.
    </DefinitionContent>
</Definition>
<Definition withName={true}>
    <DefinitionName>Cut</DefinitionName>
    <DefinitionContent>
        For a subset of vertices $S \subseteq V$, the cut with shore $S$ is the set of edges with exactly one endpoint in $S$. We use the notation
        $$
        \delta(S) = \{ij \in E : i \in S, j \notin S\}
        $$
        For example, we have
        $$
        \delta(S) = \{e_{12}, e_{25}, e_{35}, e_{45}, e_{14}\}
        $$
        for the following
        ![Cut Example](/images/school/spring-2024/co351/1-1.png)
    </DefinitionContent>
</Definition>
<Definition withName={true}>
    <DefinitionName>$st$-Cut</DefinitionName>
    <DefinitionContent>
        For vertices $s$ and $t$ with $s \neq t$ of $G$, and $st$-cut of $G$ is a cut $\delta(S)$ where $S \subset V$, with $s \in S$ and $t \notin S$.

        Using the example from above, if we have $s = v_1$ and $t = v_3$, then the above is an $st$-cut.
    </DefinitionContent>
</Definition>
Now, we have our first theorem.
<Theorem>
    <TheoremContent>
        Let $G = (V, E)$ be a graph, and let $s, t$ be vertices of $G$. Then there exists an $st$-path if and only if every $st$-cut is non-empty.
    </TheoremContent>
</Theorem>
<Proof>
    <ProofContent>
        $(\Rightarrow)$ Suppose that there exists an $st$-path $P = v_1,\ldots,v_k$ where $s = v_1$, and $t = v_k$. We prove that every $st$-cut is non-empty. Let $\delta(\hat S)$ be any $st$-cut, where $s \in \hat S$ and $t \notin \hat S$. Let $\ell$ be the largest index such that $v_\ell \in \hat S$, and note that $\ell \neq k$ since $v_k = t$ is not in $\hat S$. So, we have that $v_{\ell + 1}$ is not in $\hat S$. Thus, the edge $v_\ell v_{\ell + 1}$ is in $\delta(\hat S)$, hence $\delta(\hat S) \neq \emptyset$.

        ![](/images/school/spring-2024/co351/1-2.png)

        $(\Leftarrow)$ Assume that every $st$-cut is non-empty. Suppose for contradiction that no $st$-path exists. We let $S$ be the set of vertices which can be reached from $s$. By construction, we have $s \in S$, and $t \not \in S$ since no $st$-path exists (and thus $t$ is not reachable from $s$). Moreover, for all $u \in S$ and $v \not \in S$, there exists an $su$-path (since $u \in S$), but there is no $sv$-path (since $v \not \in S$). So, we also have that $v$ is not reachable from $u$. Since this is true for all $u \in S$ and $v \not \in S$, this means that there are no edges originating from $S$ to $V \setminus S$. Thus, $\delta(S) = \emptyset$, which is a contradiction. Therefore, there exists an $st$-path.

        ![](/images/school/spring-2024/co351/1-3.png)
    </ProofContent>
</Proof>
<Definition withName={true}>
<DefinitionName>Connected</DefinitionName>
<DefinitionContent>
A graph $G = (V, E)$ is connected if for each pair $i, j \in V$, there exists an $ij$-path.
</DefinitionContent>
</Definition>
<Definition withName={true}>
<DefinitionName>Digraph</DefinitionName>
<DefinitionContent>
A digraph $D$ is a pair $(N, A)$ where $N$ is a finite set and $A$ is a set of ordered pairs of elements of $N$. The elements of $N$ are called nodes, and the elements of $A$ are called arcs. An arc $(i,j)$ is also written as $ij$.

For an arc $ij$, node $i$ is called the tail, and node $j$ is called the head.

The **out-degree** of a node $v$ is the number of arcs with tail $v$, we write $d(v)$.

The **in-degree** of a node $v$ is the number of arcs with head $v$, we write $\bar d(v)$.
</DefinitionContent>
</Definition>
<Definition withName={true}>
<DefinitionName>Node-arc Incidence Matrix</DefinitionName>
<DefinitionContent>
The node-arc incidence matrix of a digraph $D = (N, A)$ is an $|N| \times |A|$ matrix $M$ such that
- its rows are the nodes of $D$
- its columns are the arcs of $D$
- the entry for node $v$ and arc $ij$, $m_{v, ij}$ is given by
    $$
    m_{v, ij} = \begin{cases}
        0 & \text{if $v \neq i$ and $v \neq j$} \\
        1 & \text{if $v = j$} \\
        -1 & \text{if $v = i$}
    \end{cases}
    $$
</DefinitionContent>
</Definition>
Let's illustrate this on an example. Suppose that we have the digraph

![Digraph Example](/images/school/spring-2024/co351/1-4.png)

Then the node-arc incidence matrix $M$ is

| $v \downarrow$ $e \rightarrow$ | 12 | 14 | 24 | 31 | 35 | 43 | 45 | 51 |
|---|---|---|---|---|---|---|---|---|
| 1 | -1 | -1 | 0 | 1 | 0 | 0 | 0 | 1 |
| 2 | 1 | 0 | -1 | 0 | 0 | 0 | 0 | 0 |
| 3 | 0 | 0 | 0 | -1 | 1 | 1 | 0 | 0 |
| 4 | 0 | 1 | 1 | 0 | 0 | -1 | -1 | 0 |
| 5 | 0 | 0 | 0 | 0 | 1 | 0 | 1 | -1 |

Notice that each column has exactly one 1 and one -1, and the rest are 0s. This is because each arc has exactly one tail and one head.

## Lecture 2 (May 9 2024)
### Fundamentals (Continued)
Let's continue with some more definitions.
#### Basic Definitions for Digraphs
<Definition>
<DefinitionName>Diwalk</DefinitionName>
<DefinitionContent>
A diwalk $Q$ is a non-empty sequence of arcs $v_1v_2,v_2v_3,\ldots,v_{k-1}v_k$. 

We can abbreviate this by only writing the nodes: $Q = v_1,v_2,\ldots,v_k$. Note that this implies that $v_iv_{i+1}$ is an arc, and an arc may appear several times in a walk.
</DefinitionContent>
</Definition>

<Definition>
    <DefinitionName>Dipath</DefinitionName>
    <DefinitionContent>
        A dipath $P$ is a diwalk such that $v_1,\ldots,v_k$ are distinct nodes.
    </DefinitionContent>
</Definition>

<Definition>
    <DefinitionName>Dicycle</DefinitionName>
    <DefinitionContent>
        A dicycle $C$ is a diwalk such that $k \geq 3$ and $v_1 = v_k$ with $v_1,\ldots,v_{k-1}$ being distinct.
    </DefinitionContent>
</Definition>

<Definition>
    <DefinitionName>$st$-diwalk</DefinitionName>
    <DefinitionContent>
        An $st$-diwalk is a diwalk that starts at $s$ and ends at $t$.
    </DefinitionContent>
</Definition>

<Definition>
    <DefinitionName>$st$-dipath</DefinitionName>
    <DefinitionContent>
        An $st$-dipath is a dipath that starts at $s$ and ends at $t$, with $s \neq t$.
    </DefinitionContent>
</Definition>

<Definition>
    <DefinitionName>Acyclic</DefinitionName>
    <DefinitionContent>
        A digraph $D$ that contains no dicycle is acyclic.
    </DefinitionContent>
</Definition>

<Definition>
    <DefinitionName>Reach</DefinitionName>
    <DefinitionContent>
        For nodes $s,v$ of digraph $D$, $v$ can be reached from $s$ if $D$ has an $sv$-diwalk.
    </DefinitionContent>
</Definition>

<Definition>
    <DefinitionName>Subdigraph</DefinitionName>
    <DefinitionContent>
        $D' = (N', A')$ is called a subdigraph of $D = (N, A)$ if $N' \subseteq N$ and $A \subseteq A$.
    </DefinitionContent>
</Definition>

<Definition>
    <DefinitionName>Spanning Subdigraph</DefinitionName>
    <DefinitionContent>
        $D' = (N', A')$ is called a spanning subdigraph of $D = (N, A)$ if $N' = N$ and $A' \subseteq A$. In other words, $D'$ contains all the nodes of $D$, but only contains a subset of the arcs.
    </DefinitionContent>
</Definition>

#### Cuts
Suppose we have a digraph $D = (N, A)$
<Definition>
    <DefinitionName>Cut</DefinitionName>
    <DefinitionContent>
        For $S \subseteq N$, the cut with shore $S$ is the set of arcs with **tails in** $S$ and **heads not in** $S$.

        We use the notation 
        $$
        \delta_D(S) = \delta(S) = \{uv \in A: u \in S, v \not \in S\}
        $$
    </DefinitionContent>
</Definition>
<Definition>
    <DefinitionName>$st$-Cut</DefinitionName>
    <DefinitionContent>
        For nodes $s, t$ where $s \neq t$ of $D$, an $st$-cut of $D$ is a cut $\delta(S)$ where $S \subset N$, with $s \in S$ and $t \not \in S$.
    </DefinitionContent>
</Definition>
<Theorem>
    <TheoremContent>
        Let $D = (N, A)$ be a digraph, and let $s, t$ be distinct nodes of $D$. There exists an $st$-dipath if and only if every $st$-cut is non-empty.
    </TheoremContent>
</Theorem>

#### Trees
<Definition>
    <DefinitionName>Tree</DefinitionName>
    <DefinitionContent>
        A tree is a connected digraph that contains no cycles.
    </DefinitionContent>
</Definition>
<Definition>
    <DefinitionName>Spanning Tree</DefinitionName>
    <DefinitionContent>
        A spanning tree of a graph $G$ is a subgraph $T$ of $H$ such that $V(T) = V(G)$ and $T$ is a tree.
    </DefinitionContent>
</Definition>
<Lemma>
    <LemmaContent>
        For a tree $T$ and any two vertices $i$ and $j$ of $T$, there is a unique $ij$-path in $T$.
    </LemmaContent>
</Lemma>
<Theorem withName={true}>
    <TheoremName>1.7</TheoremName>
    <TheoremContent>
        Let $T = (U, F)$ be a tree. Then
        1. For any edge $e \not \in F$, graph $T + e = (U, F \cup \{e\})$ has exactly one cycle $C$.
        2. For any edge $e' \in C$, where $C$ is the cycle from 1, the graph $T + e - e' = (U, F \cup \{e\} \setminus \{e'\})$ is a tree.
    </TheoremContent>
</Theorem>
Note that the cycle from the first part of the theorem is called the **fundamental cycle** of the edge $e$.
<Definition>
    <DefinitionName>Fundamental Cycle</DefinitionName>
    <DefinitionContent>
        The fundamental cycle of a given tree $T$ is the unique cycle of $T + e$, where $e$ is an edge and $e \not \in E(T)$.
    </DefinitionContent>
</Definition>
To prove the theorem above, we will need the following lemmas.
<Lemma withName={true}>
    <LemmaName>1.8</LemmaName>
    <LemmaContent>
        For any graph $G$, if there exists a $uv$-path and a $vw$-path, then there exists a $uw$-path.
    </LemmaContent>
</Lemma>
<Proof withName={true}>
    <ProofName>Sketch</ProofName>
    <ProofContent>
        Note that we cannot just take the union of the paths, as there might be overlaps. However, a union of the paths does give us a walk from $u$ to $w$. We can then use the fact that a walk can be converted to a path by removing cycles.
    </ProofContent>
</Proof>

<Lemma withName={true}>
    <LemmaName>1.9</LemmaName>
    <LemmaContent>
        Let $G$ be a connected graph with a cycle $C$, let $e$ be an edge of $C$. Then $G - e$ is connected.
    </LemmaContent>
</Lemma>
<Proof>
    <ProofContent>
        Let $v_1,v_2$ be any pair of vertices of $G - e$. We want to show that there exists a $v_1v_2$-path $P'$ of $G - e$, and thus $G - e$ is connected.

        Since $G$ is connected, there exists a $v_1v_2$-path $P$ of $G$. If $P$ does not contain $e$, then $P$ is also a $v_1v_2$-path of $G - e$, and we are done.

        Otherwise, $P$ contains $e$. Let $e = uw$. Since $G$ is connected, there exists a $v_1u$-path $P_1$ and a $wv_2$-path $P_2$. Moreover, $C - e = C - uw$ is a $uw$-path. Thus, by the Lemma 1.8, since there exists a $v_1u$-path and a $uw$-path, there exists a $v_1w$-path. Then, since there exists a $v_1w$-path and a $wv_2$-path, there exists a $v_1v_2$-path. Thus, $G - e$ is connected.
    </ProofContent>
</Proof>

<Lemma withName={true}>
    <LemmaName>1.10</LemmaName>
    <LemmaContent>
        In a tree $T$, any 2 vertices are connected by a **unique** path.
    </LemmaContent>
</Lemma>
<Proof>
    <ProofContent>
        Assume for contradiction that there exists two distinct $uv$-paths $P_1$ and $P_2$ in $T$. Then the parts of $P_1$ and $P_2$ can be joined together to form a cycle, which is a contradiction since trees do not have cycles. 
    </ProofContent>
</Proof>
Now, we can finally prove Theorem 1.7.
<Proof withName={true}>
    <ProofName>Theorem 1.7</ProofName>
    <ProofContent>
        Since $T$ is acyclic, each cycle of $T + e$ contains $e = xy$. Moreover, $C$ is a cycle of $T + e$ if and only if $C - e$ is a $xy$-path of $T$.

        By Lemma 1.10, $T$ contains a unique $xy$-path, therefore $T + e$ contains a unique cycle $C$. This proves the first part of the theorem.

        Now we prove the second part. Since $T$ is a tree (which is connected), $T + e$ is connected as well. Moreover, $T + e$ contains a unique cycle $C$ from the first part of the theorem. Let $e' \in C$. Then $T + e - e'$ is connected by Lemma 1.9. Then by first part, since $C$ is unique, $T + e - e'$ is acyclic. Thus, $T + e - e'$ is a tree.
    </ProofContent>
</Proof>